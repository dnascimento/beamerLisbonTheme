%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 2014 - Dario Nascimento (dario.nascimento@tecnico.ulisboa.pt)
% 
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\mode<presentation>
\useoutertheme{sidebar}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% String used between the current page and the total page count.
\def\beamer@ericeira@pageofpages{/}
\DeclareOptionBeamer{pageofpages}{\def\beamer@ericeira@pageofpages{#1}}

% Show a line below the frame title.
\DeclareOptionBeamer{titleLine}[true]{\def\beamer@ericeira@titleLine{#1}}

\ExecuteOptionsBeamer{titleLine=false}
\ProcessOptionsBeamer

% Colors.
\setbeamercolor*{lineup}{parent=palette primary}
\setbeamercolor*{linemid}{parent=palette secondary}
\setbeamercolor*{linebottom}{parent=palette tertiary}
\setbeamercolor*{page header}{parent=titlelike}

% Lengths
\newlength{\headerheight}
\setlength{\headerheight}{.045\paperheight}
\newlength{\beamer@ericeira@lineup}
\setlength{\beamer@ericeira@lineup}{.025\paperheight}
\newlength{\beamer@ericeira@linemid}
\setlength{\beamer@ericeira@linemid}{.015\paperheight}
\newlength{\beamer@ericeira@linebottom}
\setlength{\beamer@ericeira@linebottom}{.01\paperheight}

% Footer.
\defbeamertemplate*{footline}{ericeira theme}
{
  \leavevmode%
  % Page number.
  \hbox{%
  \begin{beamercolorbox}[wd=.2\paperwidth,ht=0ex,dp=0ex,center]{}%
    \usebeamerfont{palette primary}\insertframenumber{} \beamer@ericeira@pageofpages{} \inserttotalframenumber%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.8\paperwidth,ht=0ex,dp=0ex]{}%
  \end{beamercolorbox}%
  } %
  % First line.
  \hbox{%
  \begin{beamercolorbox}[wd=.15\paperwidth,ht=\beamer@ericeira@lineup,dp=0pt]{}%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.85\paperwidth,ht=\beamer@ericeira@lineup,dp=0pt]{lineup}%
  \end{beamercolorbox}%
  } %
  % Second line.
  \hbox{%
  \begin{beamercolorbox}[wd=\paperwidth,ht=\beamer@ericeira@linemid,dp=0pt]{linemid}%
  \end{beamercolorbox}%
  } %
  % Third line.
  \hbox{%
  \begin{beamercolorbox}[wd=.07\paperwidth,ht=\beamer@ericeira@linebottom,dp=0pt]{}%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.93\paperwidth,ht=\beamer@ericeira@linebottom,dp=0pt]{linebottom}%
  \end{beamercolorbox}%
  }%

}

%Set sidebar width
\beamer@sidebarwidth=3.0\baselineskip

\setbeamertemplate{sidebar \beamer@sidebarside}
{

  \begin{beamercolorbox}[wd=\paperwidth]{frametitle}
      \usebeamercolor[bg]{logo}%
      \vrule width\beamer@sidebarwidth height \beamer@headheight%
      \hskip-\beamer@sidebarwidth%
      \hbox to \beamer@sidebarwidth{\hss\vbox to
        \beamer@headheight{\vss\hbox{\hskip27\color{fg}\insertlogo}\vss}\hss}%
  \end{beamercolorbox}

  \beamer@tempdim=\beamer@sidebarwidth%
  \advance\beamer@tempdim by -6pt%
  \insertverticalnavigation{\beamer@sidebarwidth}%
  \ifx\beamer@sidebarside\beamer@lefttext%
  \else%
    \usebeamercolor{normal text}%
    \llap{\usebeamertemplate***{navigation symbols}\hskip0.1cm}%
    \vskip2pt%
  \fi%
  \vfill
  {\smash{\hspace*{\beamer@sidebarwidth}\textcolor{gray!50}{\rule{1pt}{\paperheight}}}}
}%

\setbeamertemplate{section in sidebar}
{%
  \vbox{%
    \vskip1ex%
    \beamer@sidebarformat{3pt}{section in sidebar}{\insertsectionheadnumber
~\insertsectionhead}%
  }%
}
\setbeamertemplate{section in sidebar shaded}
{%
  \vbox{%
    \vskip1ex%
    \beamer@sidebarformat{3pt}{section in sidebar shaded}{\insertsectionheadnumber
~\insertsectionhead}%
  }%
}



\defbeamertemplate*{headline}{ericeira theme}
{%

}




\defbeamertemplate*{frametitle}{ericeira theme}[1][left]
{
\vbox to \beamer@headheight{%
    \vfil
    \leftskip=-\beamer@leftmargin%
    \advance\leftskip by0.5cm%
    \rightskip=-\beamer@rightmargin%
    \advance\rightskip by0.3cm plus1fil%
    {\usebeamercolor[fg]{frametitle}\usebeamerfont{frametitle}\strut\insertframetitle\strut\par}%
    {\usebeamercolor[fg]{framesubtitle}\usebeamerfont{framesubtitle}\insertframesubtitle\par}%
    \vskip-.9\beamer@leftmargin%
    \begin{beamercolorbox}[wd=\textwidth,ht=.1ex,dp=0ex]{linemid}%
    \end{beamercolorbox}%
    \vbox{}%
    \vskip-1em%
    \vfil
  }%
}

% Frame title continuations, default
\defbeamertemplate*{frametitle continuation}{ericeira theme}{(\insertcontinuationcount)}

\defbeamertemplate*{sidebar right}{ericeira theme}
{
  \vskip.1\beamer@leftmargin%
  \llap{\hskip.5\beamer@leftmargin}%
  \vfill%
}

\mode
<all>
